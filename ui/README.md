# UI - Phrase Manager

Simple static website for managing phrases via the AWS Test API.

## Features

- **Add Phrase** - Form with character counter (max 100 chars)
- **View Counter** - Real-time display of total phrases
- **List Phrases** - Shows all stored phrases
- **Auto-refresh** - Updates every 30 seconds
- **Responsive** - Works on mobile and desktop

## Deployment

### Automatic (via CDK)

When you deploy the stack, the UI is automatically:
1. Uploaded to S3 bucket
2. Configured with correct API endpoint
3. Made publicly accessible

```powershell
.\deploy.ps1 development eu-central-1 YOUR_ACCOUNT_ID
```

**After deployment, find the website URL in outputs:**
```
Outputs:
AwsTest-development.WebsiteUrl = http://aws-test-development-ui.s3-website.eu-central-1.amazonaws.com
```

### Manual Testing (Local)

To test locally before deployment:

**1. Update app.js with your API URL:**
```javascript
const API_URL = 'https://YOUR_API_URL/';
```

**2. Serve locally:**
```powershell
# Using Python
python -m http.server 8000

# Or using Node.js
npx serve .
```

**3. Open browser:**
```
http://localhost:8000
```

## Files

- **index.html** - Main HTML structure
- **styles.css** - Styling (gradient background, cards, forms)
- **app.js** - JavaScript logic (API calls, DOM manipulation)
- **config.js** - Auto-generated during deployment (contains API endpoint)

## How It Works

### Configuration Loading

```javascript
// config.js (auto-generated by CDK)
window.CONFIG = { API_ENDPOINT: "https://abc123.execute-api.eu-central-1.amazonaws.com/prod/" };

// app.js loads it
let API_URL = window.CONFIG.API_ENDPOINT;
```

### API Integration

**Add Phrase:**
```javascript
POST /phrases
Body: { "phrase": "Hello World" }
→ Updates counter
→ Reloads phrase list
```

**Load Counter:**
```javascript
GET /counter
→ Updates counter display
```

**Load Phrases:**
```javascript
GET /phrases
→ Renders phrase cards
```

### Auto-Refresh

```javascript
// Refresh every 30 seconds
setInterval(async () => {
    await loadCounter();
    await loadPhrases();
}, 30000);
```

## Design

**Color Scheme:**
- Primary: Blue (#3b82f6)
- Background: Purple gradient
- Cards: White with shadow
- Text: Dark gray

**Layout:**
- Header with title
- Stats bar with counter
- Add phrase form
- Phrase list (newest first)

**Responsive:**
- Desktop: 800px max width
- Mobile: Full width, adjusted fonts

## Hosting Architecture

```
S3 Bucket (Static Website)
├── index.html
├── styles.css
├── app.js
└── config.js (auto-generated)

Configuration:
├── Public read access
├── Website hosting enabled
├── CORS configured
└── Auto-delete on stack destroy
```

## Cost

**S3 Static Website Hosting:**
- Storage: $0.023 per GB/month (~$0.0001 for these files)
- Requests: $0.0004 per 1000 requests
- Data Transfer: $0.09 per GB (first 10TB)

**For 1000 visits/month:**
- Storage: ~$0.0001
- Requests: ~$0.004
- Data Transfer: ~$0.001 (assuming 1MB per visit)
- **Total: ~$0.005/month** (half a cent!)

## Extending the UI

### Add Delete Functionality

```javascript
async function deletePhrase(id) {
    await fetch(`${API_URL}/phrases/${id}`, {
        method: 'DELETE'
    });
    await loadPhrases();
}
```

### Add Edit Functionality

```javascript
async function updatePhrase(id, newPhrase) {
    await fetch(`${API_URL}/phrases/${id}`, {
        method: 'PUT',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ phrase: newPhrase })
    });
    await loadPhrases();
}
```

### Add Search/Filter

```javascript
function filterPhrases(searchTerm) {
    const filtered = phrases.filter(p => 
        p.phrase.toLowerCase().includes(searchTerm.toLowerCase())
    );
    renderPhrases(filtered);
}
```

## Troubleshooting

**Blank page:**
- Check browser console for errors
- Verify API URL in config.js
- Check S3 bucket is publicly accessible

**API calls fail:**
- Verify API Gateway CORS is enabled
- Check API endpoint in config.js
- Check browser network tab for errors

**Phrases don't load:**
- Check API is deployed and working
- Test API directly with curl
- Check Lambda logs for errors

